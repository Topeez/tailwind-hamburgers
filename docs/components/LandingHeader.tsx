import { useEffect, useState } from "react";
import throttle from "lodash.throttle";
import classNames from "classnames";
import Link from "next/link";

export const LandingHeader = () => {
  const [scrolled, setScrolled] = useState(false);

  useEffect(() => {
    setScrolled(window.scrollY > 0);

    const handleScroll = () => {
      if (window.scrollY > 0) {
        setScrolled(true);
      } else {
        setScrolled(false);
      }
    };
    const handleScrollDebounced = throttle(handleScroll, 100);

    window.addEventListener("scroll", handleScrollDebounced);

    return () => {
      window.removeEventListener("scroll", handleScrollDebounced);
    };
  });

  return (
    <header
      className={classNames(
        "sticky top-0 z-50 flex flex-wrap items-center justify-between px-4 py-5 transition duration-500 sm:px-6 lg:px-8",
        {
          "bg-transparent": !scrolled,
          "bg-slate-900/80 backdrop-blur": scrolled,
        }
      )}
    >
      <div className="relative flex flex-grow basis-0 items-center">
        <Link href="/">
          <svg
            viewBox="0 0 398 25"
            fill="none"
            className="h-3 sm:h-4 w-auto fill-sky-100"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M0.136368 4.78418V0.727362H19.25V4.78418H12.125V24.0001H7.26137V4.78418H0.136368Z" />
            <path d="M24.5253 24.0001H19.2526L27.2867 0.727362H33.6276L41.6503 24.0001H36.3776L30.5481 6.04554H30.3663L24.5253 24.0001ZM24.1958 14.8524H36.6503V18.6933H24.1958V14.8524Z" />
            <path d="M50.3319 0.727362V24.0001H45.4115V0.727362H50.3319Z" />
            <path d="M55.3402 24.0001V0.727362H60.2607V19.9433H70.238V24.0001H55.3402Z" />
            <path d="M78.3826 24.0001L71.7235 0.727362H77.0985L80.9508 16.8978H81.144L85.394 0.727362H89.9963L94.2349 16.9319H94.4394L98.2917 0.727362H103.667L97.0076 24.0001H92.2122L87.7803 8.78418H87.5985L83.1781 24.0001H78.3826Z" />
            <path d="M112.181 0.727362V24.0001H107.26V0.727362H112.181Z" />
            <path d="M136.655 0.727362V24.0001H132.405L122.28 9.35236H122.109V24.0001H117.189V0.727362H121.507L131.553 15.3637H131.757V0.727362H136.655Z" />
            <path d="M149.93 24.0001H141.68V0.727362H149.998C152.339 0.727362 154.354 1.19327 156.044 2.12509C157.733 3.04933 159.032 4.37888 159.942 6.11373C160.858 7.84857 161.317 9.92433 161.317 12.341C161.317 14.7652 160.858 16.8486 159.942 18.591C159.032 20.3334 157.726 21.6705 156.021 22.6024C154.324 23.5342 152.294 24.0001 149.93 24.0001ZM146.601 19.7842H149.726C151.18 19.7842 152.404 19.5266 153.396 19.0115C154.396 18.4887 155.146 17.6819 155.646 16.591C156.154 15.4925 156.408 14.0758 156.408 12.341C156.408 10.6213 156.154 9.216 155.646 8.12509C155.146 7.03418 154.4 6.23115 153.408 5.716C152.415 5.20085 151.192 4.94327 149.737 4.94327H146.601V19.7842Z" />
            <path d="M166.194 24.0001V0.727362H170.41V10.5796H181.194V0.727362H185.421V24.0001H181.194V14.1137H170.41V24.0001H166.194Z" />
            <path d="M193.955 24.0001H189.455L197.649 0.727362H202.853L211.058 24.0001H206.558L200.342 5.50009H200.16L193.955 24.0001ZM194.103 14.8751H206.376V18.2615H194.103V14.8751Z" />
            <path d="M215.083 0.727362H220.242L227.151 17.591H227.424L234.333 0.727362H239.492V24.0001H235.447V8.01145H235.231L228.799 23.9319H225.776L219.344 7.97736H219.128V24.0001H215.083V0.727362Z" />
            <path d="M245.043 24.0001V0.727362H253.952C255.634 0.727362 257.032 0.992513 258.145 1.52282C259.266 2.04554 260.104 2.76145 260.657 3.67054C261.217 4.57963 261.498 5.60994 261.498 6.76145C261.498 7.70842 261.316 8.51903 260.952 9.19327C260.588 9.85994 260.1 10.4016 259.486 10.8183C258.873 11.2349 258.187 11.5342 257.429 11.716V11.9433C258.255 11.9887 259.047 12.2425 259.804 12.7046C260.569 13.1592 261.194 13.8031 261.679 14.6365C262.164 15.4698 262.407 16.4774 262.407 17.6592C262.407 18.8637 262.115 19.9471 261.532 20.9092C260.948 21.8637 260.069 22.6175 258.895 23.1705C257.721 23.7236 256.244 24.0001 254.463 24.0001H245.043ZM249.259 20.4774H253.793C255.323 20.4774 256.426 20.1857 257.1 19.6024C257.782 19.0115 258.123 18.2539 258.123 17.3296C258.123 16.6402 257.952 16.019 257.611 15.466C257.27 14.9054 256.785 14.466 256.157 14.1478C255.528 13.8221 254.778 13.6592 253.907 13.6592H249.259V20.4774ZM249.259 10.6251H253.429C254.157 10.6251 254.812 10.4925 255.395 10.2274C255.979 9.95463 256.437 9.57206 256.77 9.07963C257.111 8.57963 257.282 7.98873 257.282 7.30691C257.282 6.40539 256.963 5.66297 256.327 5.07963C255.698 4.4963 254.763 4.20463 253.52 4.20463H249.259V10.6251Z" />
            <path d="M281.705 0.727362H285.921V15.9319C285.921 17.5986 285.527 19.0645 284.739 20.3296C283.958 21.5948 282.86 22.5834 281.443 23.2955C280.027 24.0001 278.371 24.3524 276.477 24.3524C274.576 24.3524 272.917 24.0001 271.5 23.2955C270.083 22.5834 268.985 21.5948 268.205 20.3296C267.424 19.0645 267.034 17.5986 267.034 15.9319V0.727362H271.25V15.5796C271.25 16.5493 271.462 17.413 271.886 18.1705C272.318 18.9281 272.924 19.5228 273.705 19.9546C274.485 20.3789 275.409 20.591 276.477 20.591C277.546 20.591 278.47 20.3789 279.25 19.9546C280.038 19.5228 280.644 18.9281 281.068 18.1705C281.493 17.413 281.705 16.5493 281.705 15.5796V0.727362Z" />
            <path d="M291.463 24.0001V0.727362H300.19C301.978 0.727362 303.478 1.03797 304.69 1.65918C305.91 2.28039 306.83 3.1516 307.452 4.27282C308.08 5.38645 308.395 6.6857 308.395 8.17054C308.395 9.66297 308.077 10.9584 307.44 12.0569C306.811 13.1478 305.883 13.9925 304.656 14.591C303.429 15.1819 301.921 15.4774 300.133 15.4774H293.918V11.9774H299.565C300.611 11.9774 301.467 11.8334 302.133 11.5455C302.8 11.2501 303.293 10.8221 303.611 10.2615C303.936 9.69327 304.099 8.9963 304.099 8.17054C304.099 7.34479 303.936 6.64024 303.611 6.05691C303.285 5.466 302.789 5.01903 302.122 4.716C301.455 4.40539 300.596 4.25009 299.543 4.25009H295.679V24.0001H291.463ZM303.486 13.4546L309.247 24.0001H304.543L298.883 13.4546H303.486Z" />
            <path d="M328.826 8.15918C328.637 7.54554 328.376 6.9963 328.042 6.51145C327.717 6.01903 327.323 5.59857 326.86 5.25009C326.406 4.9016 325.883 4.64024 325.292 4.466C324.701 4.28418 324.057 4.19327 323.36 4.19327C322.11 4.19327 320.997 4.50767 320.02 5.13645C319.042 5.76524 318.273 6.68948 317.713 7.90918C317.16 9.1213 316.883 10.5986 316.883 12.341C316.883 14.0986 317.16 15.5872 317.713 16.8069C318.266 18.0266 319.035 18.9546 320.02 19.591C321.004 20.2198 322.148 20.5342 323.451 20.5342C324.633 20.5342 325.656 20.3069 326.52 19.8524C327.391 19.3978 328.061 18.7539 328.531 17.9205C329.001 17.0796 329.235 16.0948 329.235 14.966L330.19 15.1137H323.872V11.8183H333.315V14.6137C333.315 16.6062 332.891 18.3296 332.042 19.7842C331.194 21.2387 330.027 22.3599 328.542 23.1478C327.057 23.9281 325.353 24.3183 323.429 24.3183C321.285 24.3183 319.402 23.8372 317.781 22.8751C316.167 21.9054 314.906 20.5304 313.997 18.7501C313.095 16.9622 312.645 14.841 312.645 12.3865C312.645 10.5077 312.91 8.82963 313.44 7.35236C313.978 5.87509 314.728 4.6213 315.69 3.591C316.652 2.55312 317.781 1.76524 319.076 1.22736C320.372 0.681907 321.781 0.40918 323.304 0.40918C324.592 0.40918 325.792 0.598574 326.906 0.977362C328.02 1.34857 329.008 1.87888 329.872 2.56827C330.743 3.25766 331.459 4.07585 332.02 5.02282C332.58 5.96979 332.948 7.01524 333.122 8.15918H328.826Z" />
            <path d="M338.352 24.0001V0.727362H353.488V4.26145H342.568V10.5796H352.704V14.1137H342.568V20.466H353.579V24.0001H338.352Z" />
            <path d="M358.749 24.0001V0.727362H367.476C369.264 0.727362 370.764 1.03797 371.976 1.65918C373.196 2.28039 374.117 3.1516 374.738 4.27282C375.367 5.38645 375.681 6.6857 375.681 8.17054C375.681 9.66297 375.363 10.9584 374.726 12.0569C374.098 13.1478 373.17 13.9925 371.942 14.591C370.715 15.1819 369.208 15.4774 367.42 15.4774H361.204V11.9774H366.851C367.897 11.9774 368.753 11.8334 369.42 11.5455C370.086 11.2501 370.579 10.8221 370.897 10.2615C371.223 9.69327 371.386 8.9963 371.386 8.17054C371.386 7.34479 371.223 6.64024 370.897 6.05691C370.571 5.466 370.075 5.01903 369.408 4.716C368.742 4.40539 367.882 4.25009 366.829 4.25009H362.965V24.0001H358.749ZM370.772 13.4546L376.533 24.0001H371.829L366.17 13.4546H370.772Z" />
            <path d="M393.169 7.12509C393.063 6.13267 392.616 5.35994 391.829 4.80691C391.048 4.25388 390.033 3.97736 388.783 3.97736C387.904 3.97736 387.151 4.10994 386.522 4.37509C385.893 4.64024 385.412 5.00009 385.079 5.45463C384.745 5.90918 384.575 6.42812 384.567 7.01145C384.567 7.4963 384.677 7.91676 384.897 8.27282C385.124 8.62888 385.431 8.93191 385.817 9.18191C386.204 9.42433 386.632 9.62888 387.101 9.79554C387.571 9.96221 388.044 10.1024 388.522 10.216L390.704 10.7615C391.582 10.966 392.427 11.2425 393.238 11.591C394.056 11.9395 394.787 12.3789 395.431 12.9092C396.082 13.4395 396.597 14.0796 396.976 14.8296C397.355 15.5796 397.544 16.4584 397.544 17.466C397.544 18.8296 397.196 20.0304 396.499 21.0683C395.802 22.0986 394.794 22.9054 393.476 23.4887C392.166 24.0645 390.579 24.3524 388.715 24.3524C386.904 24.3524 385.332 24.0721 383.999 23.5115C382.673 22.9508 381.635 22.1327 380.885 21.0569C380.143 19.9812 379.741 18.6705 379.681 17.1251H383.829C383.889 17.9357 384.139 18.6099 384.579 19.1478C385.018 19.6857 385.59 20.0872 386.294 20.3524C387.007 20.6175 387.802 20.7501 388.681 20.7501C389.597 20.7501 390.401 20.6137 391.09 20.341C391.787 20.0607 392.332 19.6743 392.726 19.1819C393.12 18.6819 393.321 18.0986 393.329 17.4319C393.321 16.8258 393.143 16.3258 392.794 15.9319C392.446 15.5304 391.957 15.1971 391.329 14.9319C390.707 14.6592 389.98 14.4168 389.147 14.2046L386.499 13.5228C384.582 13.0304 383.067 12.2842 381.954 11.2842C380.847 10.2766 380.294 8.93948 380.294 7.27282C380.294 5.9016 380.666 4.70085 381.408 3.67054C382.158 2.64024 383.177 1.841 384.465 1.27282C385.753 0.697058 387.211 0.40918 388.84 0.40918C390.491 0.40918 391.938 0.697058 393.181 1.27282C394.431 1.841 395.412 2.63267 396.124 3.64782C396.836 4.65539 397.204 5.81448 397.226 7.12509H393.169Z" />
          </svg>
        </Link>
      </div>
      <div className="relative flex basis-0 justify-end gap-6 sm:gap-8 md:flex-grow">
        <a
          className="group"
          aria-label="npm"
          href="https://www.npmjs.com/package/tailwind-hamburgers"
          target="_blank"
        >
          <svg
            className="h-6 w-6 fill-slate-400 group-hover:fill-slate-300"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 32 32"
          >
            <path d="M 0 10 L 0 21 L 9 21 L 9 23 L 16 23 L 16 21 L 32 21 L 32 10 L 0 10 z M 1.7773438 11.777344 L 8.8886719 11.777344 L 8.890625 11.777344 L 8.890625 19.445312 L 7.1113281 19.445312 L 7.1113281 13.556641 L 5.3339844 13.556641 L 5.3339844 19.445312 L 1.7773438 19.445312 L 1.7773438 11.777344 z M 10.667969 11.777344 L 17.777344 11.777344 L 17.779297 11.777344 L 17.779297 19.443359 L 14.222656 19.443359 L 14.222656 21.222656 L 10.667969 21.222656 L 10.667969 11.777344 z M 19.556641 11.777344 L 30.222656 11.777344 L 30.224609 11.777344 L 30.224609 19.445312 L 28.445312 19.445312 L 28.445312 13.556641 L 26.667969 13.556641 L 26.667969 19.445312 L 24.890625 19.445312 L 24.890625 13.556641 L 23.111328 13.556641 L 23.111328 19.445312 L 19.556641 19.445312 L 19.556641 11.777344 z M 14.222656 13.556641 L 14.222656 17.667969 L 16 17.667969 L 16 13.556641 L 14.222656 13.556641 z" />
          </svg>
        </a>
        <a
          className="group"
          aria-label="GitHub"
          href="https://github.com/patrykgulas/tailwind-hamburgers"
          target="_blank"
        >
          <svg
            aria-hidden="true"
            viewBox="0 0 16 16"
            className="h-6 w-6 fill-slate-400 group-hover:fill-slate-300"
          >
            <path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" />
          </svg>
        </a>
      </div>
    </header>
  );
};
